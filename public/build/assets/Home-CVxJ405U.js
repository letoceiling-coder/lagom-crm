import{_ as y,r as h,o as $,e as o,f as g,h as s,A as S,a as C,t as m,w as f,B as F,d as n,m as I,b,C as L,T as j,c as B,F as k,l as v,k as D,n as z}from"./app-D5CBZeCu.js";const M={name:"HeroBanner",props:{slug:{type:String,default:"home-banner"}},setup(c){const t=h(null),i=h(!0),e=async()=>{try{const d=await fetch(`/api/public/banners/${c.slug}`);if(d.ok){const l=await d.json();l.data&&(t.value={...l.data,background_image:l.data.background_image?`/${l.data.background_image.replace(/^\//,"")}`:null})}}catch(d){console.error("Error fetching banner:",d)}finally{i.value=!1}},u=()=>{t.value.button_type==="method"&&console.log("Method button clicked:",t.value.button_value)};return $(()=>{e()}),{banner:t,loading:i,handleButtonClick:u}}},N={class:"w-full px-3 sm:px-4 md:px-5 mt-3"},T={key:0,class:"relative w-full max-w-[1200px] mx-auto rounded-lg min-h-[350px] sm:min-h-[450px] md:min-h-[550px] lg:min-h-[650px] overflow-hidden shadow-sm"},V={class:"relative z-10 w-full px-4 sm:px-6 lg:px-8 h-full min-h-[350px] sm:min-h-[450px] md:min-h-[550px] lg:min-h-[650px] flex items-center"},A={class:"w-full max-w-2xl"},P={key:0,class:"space-y-2 sm:space-y-3 mb-6 sm:mb-8"},Z={key:0,class:"text-white text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-semibold leading-tight drop-shadow-lg"},q={key:1,class:"text-white text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-semibold leading-tight drop-shadow-lg"},G={key:2,class:"text-white text-lg sm:text-xl md:text-2xl lg:text-3xl font-normal leading-relaxed whitespace-pre-line drop-shadow-md"};function O(c,t,i,e,u,d){return n(),o("div",N,[e.banner&&e.banner.is_active?(n(),o("section",T,[s("div",{class:"absolute inset-0 bg-cover bg-center bg-no-repeat bg-[#6C7B6D]",style:S({backgroundImage:e.banner.background_image?`url('${e.banner.background_image}')`:"none",backgroundSize:"cover",backgroundPosition:"center"})},null,4),s("div",V,[s("div",A,[e.banner.heading_1||e.banner.heading_2||e.banner.description?(n(),o("div",P,[e.banner.heading_1?(n(),o("h1",Z,m(e.banner.heading_1),1)):g("",!0),e.banner.heading_2?(n(),o("h2",q,m(e.banner.heading_2),1)):g("",!0),e.banner.description?(n(),o("p",G,m(e.banner.description),1)):g("",!0)])):g("",!0),e.banner.button_text?(n(),C(F(e.banner.button_type==="method"?"button":"router-link"),{key:1,to:e.banner.button_type==="url"?e.banner.button_value:void 0,onClick:e.handleButtonClick,class:"inline-block bg-[#657C6C] hover:bg-[#55695a] active:bg-[#48554a] text-white font-medium text-base sm:text-lg px-8 sm:px-10 md:px-12 py-3 sm:py-3.5 md:py-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] active:scale-100 shadow-lg"},{default:f(()=>[I(m(e.banner.button_text),1)]),_:1},8,["to","onClick"])):g("",!0)])])])):g("",!0)])}const J=y(M,[["render",O]]),K={name:"DecisionCard",props:{decision:{type:Object,required:!0},slug:{type:String,default:"products"}}},Q={class:"flex flex-col justify-between h-[82px] p-3 bg-[#F4F4F4] rounded-lg transition-all duration-200 hover:shadow-md hover:bg-gray-50"},R={class:"name text-sm sm:text-base font-normal text-gray-900 leading-tight mb-2"};function U(c,t,i,e,u,d){const l=b("router-link");return n(),C(l,{to:`/${i.slug}${i.decision.slug}`,class:"block"},{default:f(()=>[s("div",Q,[s("div",R,m(i.decision.name),1),t[0]||(t[0]=s("div",{class:"flex items-center justify-end gap-2"},[s("span",{class:"text-xs sm:text-sm font-normal text-[#688E67]"},"подробнее"),s("svg",{width:"16",height:"8",viewBox:"0 0 16 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M15.3536 4.35355C15.5488 4.15829 15.5488 3.84171 15.3536 3.64645L12.1716 0.464465C11.9763 0.269203 11.6597 0.269203 11.4645 0.464465C11.2692 0.659727 11.2692 0.97631 11.4645 1.17157L14.2929 4L11.4645 6.82843C11.2692 7.02369 11.2692 7.34027 11.4645 7.53553C11.6597 7.7308 11.9763 7.7308 12.1716 7.53553L15.3536 4.35355ZM0 4L4.37114e-08 4.5L15 4.5L15 4L15 3.5L-4.37114e-08 3.5L0 4Z",fill:"#688E67"})])],-1))])]),_:1},8,["to"])}const W=y(K,[["render",U]]),X={name:"Decisions",components:{DecisionCard:W,Transition:j,TransitionGroup:L},setup(){const c=h("Выберите решение под ваш участок"),t=h([]),i=h(!0),e=h(null),u=async()=>{try{const r=await fetch("/api/public/decision-block/settings");if(!r.ok)throw new Error("Ошибка загрузки настроек");const x=await r.json();x.data&&x.data.title&&(c.value=x.data.title)}catch(r){console.error("Ошибка загрузки настроек:",r)}},d=async()=>{i.value=!0,e.value=null;try{const r=await fetch("/api/public/decision-block/chapters");if(!r.ok)throw new Error("Ошибка загрузки данных");const E=(await r.json()).data||[];t.value=E.map((p,H)=>({id:p.id,name:p.name,active:H===0,items:[...(p.products||[]).map(w=>({...w,category:"products"})),...(p.services||[]).map(w=>({...w,category:"services"}))]})),t.value.length>0&&!t.value.find(p=>p.active)&&(t.value[0].active=!0)}catch(r){console.error("Ошибка загрузки разделов:",r),e.value="Не удалось загрузить данные. Попробуйте обновить страницу."}finally{i.value=!1}},l=B(()=>t.value.find(r=>r.active)||t.value[0]),a=B(()=>l.value?.items||[]),_=r=>{t.value.forEach(x=>{x.active=x.id===r.id})};return $(async()=>{await Promise.all([u(),d()])}),{title:c,chapters:t,activeItems:a,setActiveChapter:_,loading:i,error:e}}},Y={class:"w-full px-3 sm:px-4 md:px-5 mt-8 sm:mt-12"},ee={class:"w-full max-w-[1200px] mx-auto"},te={class:"flex justify-center mb-6 sm:mb-8"},ne={class:"text-2xl sm:text-3xl md:text-4xl font-semibold text-gray-900"},se={key:0,class:"flex justify-center items-center py-12"},oe={key:1,class:"flex justify-center items-center py-12"},ae={class:"text-red-500"},re={key:0,class:"flex flex-col sm:flex-row gap-3 sm:gap-0 mb-6 sm:mb-8"},ie=["onClick"];function le(c,t,i,e,u,d){const l=b("DecisionCard");return n(),o("div",Y,[s("div",ee,[s("div",te,[s("h2",ne,m(e.title),1)]),e.loading?(n(),o("div",se,[...t[0]||(t[0]=[s("div",{class:"text-gray-500"},"Загрузка...",-1)])])):e.error?(n(),o("div",oe,[s("div",ae,m(e.error),1)])):(n(),o(k,{key:2},[e.chapters.length>0?(n(),o("div",re,[(n(!0),o(k,null,D(e.chapters,(a,_)=>(n(),o("button",{key:a.id,onClick:r=>e.setActiveChapter(a),class:z(["flex-1 px-4 sm:px-6 py-2.5 sm:py-3 text-sm sm:text-base font-normal text-center transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2","rounded-lg sm:rounded-none",a.active?"bg-[#657C6C] text-white border border-[#657C6C] hover:bg-[#55695a] focus:ring-[#657C6C] shadow-md":"bg-white text-black border border-[#657C6C] hover:bg-[#D7D7D7] focus:ring-[#657C6C] shadow-sm",_===0?a.active?"sm:rounded-l-lg sm:rounded-r-none":"sm:rounded-l-lg sm:rounded-r-none sm:border-r-0":"",_===e.chapters.length-1?a.active?"sm:rounded-r-lg sm:rounded-l-none":"sm:rounded-r-lg sm:rounded-l-none sm:border-l-0":""])},m(a.name),11,ie))),128))])):g("",!0),v(j,{name:"fade-slide",mode:"out-in"},{default:f(()=>[e.activeItems.length>0?(n(),o("div",{key:`content-${c.activeChapter?.id}`,class:"relative"},[v(L,{name:"stagger",tag:"div",class:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6"},{default:f(()=>[(n(!0),o(k,null,D(e.activeItems,(a,_)=>(n(),C(l,{key:`${a.id}-${a.category}-${c.activeChapter?.id}`,decision:a,slug:a.category==="products"?"products":"services"},null,8,["decision","slug"]))),128))]),_:1})])):(n(),o("div",{key:`empty-${c.activeChapter?.id}`,class:"flex justify-center items-center py-12"},[...t[1]||(t[1]=[s("div",{class:"text-gray-500"},"В этом разделе пока нет элементов",-1)])]))]),_:1})],64))])])}const ce=y(X,[["render",le],["__scopeId","data-v-118aed2a"]]),de={name:"Home",components:{HeroBanner:J,Decisions:ce}},me={class:"home-page"};function ue(c,t,i,e,u,d){const l=b("HeroBanner"),a=b("Decisions");return n(),o("div",me,[v(l),v(a),t[0]||(t[0]=s("div",{class:"container mx-auto max-w-[1200px] px-4 sm:px-6 lg:px-8 py-8 sm:py-12"},[s("div",{class:"text-center"},[s("h2",{class:"text-2xl sm:text-3xl md:text-4xl font-bold mb-4"},"Добро пожаловать"),s("p",{class:"text-lg text-gray-600 mb-8"},"Это публичная главная страница")])],-1))])}const ge=y(de,[["render",ue]]);export{ge as default};
