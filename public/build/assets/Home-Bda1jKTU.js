import{_ as q,r as M,c as g,o as l,d as v,a as T,n as V,b as o,e as $,t as y,w as F,f as Q,g as A,h as b,i as E,j,T as P,k as L,F as B,l as H,m as I,p as z,v as N,q as K,s as R,u as J,x as X,y as Y}from"./app-aUuM60eI.js";import{S as Z}from"./SEOHead-C4OkhTeK.js";import{u as ee}from"./usePreloader-CiHcCAv0.js";import{F as te,a as se,H as oe}from"./Faq-DIIodRRy.js";import{D as ne}from"./DecisionCard-DDiNbzCN.js";import{C as ae}from"./CaseCard-DPg3OLND.js";import{F as ie}from"./FeedbackForm-DVQ7UE0k.js";import"./sweetalert2.esm.all-C0u8rGqG.js";const re={name:"HeroBanner",components:{FeedbackModal:te},props:{slug:{type:String,default:"home-banner"}},setup(n){const t=b(null),a=b(!0),e=b(!1),c=async()=>{try{const h=await fetch(`/api/public/banners/${n.slug}`);if(h.ok){const f=await h.json();f.data&&(t.value={...f.data,background_image:f.data.background_image?`/${f.data.background_image.replace(/^\//,"")}`:null,height_desktop:f.data.height_desktop||380,height_mobile:f.data.height_mobile||300})}}catch(h){console.error("Error fetching banner:",h)}finally{a.value=!1}},i=()=>{t.value.button_type==="method"&&(!t.value.button_value||t.value.button_value.trim()===""?e.value=!0:console.log("Method button clicked:",t.value.button_value))},s=()=>{e.value=!1},r=E(()=>{if(!t.value)return{};const h=t.value.height_desktop||380,f=t.value.height_mobile||300,_=h-f,S=`(${f}px + ${_} * ((100vw - 320px) / 880))`;return{"--banner-height-mobile":`${f}px`,"--banner-height-desktop":`${h}px`,minHeight:`${f}px`,height:`clamp(${f}px, ${S}, ${h}px)`}});return j(()=>{c()}),{banner:t,loading:a,bannerStyle:r,showFeedbackModal:e,handleButtonClick:i,handleFeedbackSuccess:s}}},le={class:"w-full px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20"},ce={class:"w-full max-w-2xl"},de={key:0,class:"space-y-2 sm:space-y-3 mb-6 sm:mb-8"},ue={key:0,class:"text-white text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-semibold leading-tight drop-shadow-lg"},me={key:1,class:"text-white text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-semibold leading-tight drop-shadow-lg"},ge={key:2,class:"text-white text-lg sm:text-xl md:text-2xl lg:text-3xl font-normal leading-relaxed whitespace-pre-line drop-shadow-md"};function fe(n,t,a,e,c,i){const s=M("FeedbackModal");return l(),g("div",le,[e.banner&&e.banner.is_active?(l(),g("section",{key:0,class:"relative w-full max-w-[1200px] mx-auto rounded-lg overflow-hidden shadow-sm",style:V(e.bannerStyle)},[o("div",{class:"absolute inset-0 bg-cover bg-center bg-no-repeat bg-[#6C7B6D]",style:V({backgroundImage:e.banner.background_image?`url('${e.banner.background_image}')`:"none",backgroundSize:"cover",backgroundPosition:"center"})},null,4),o("div",{class:"relative z-10 w-full px-4 sm:px-6 lg:px-8 h-full flex items-center",style:V(e.bannerStyle)},[o("div",ce,[e.banner.heading_1||e.banner.heading_2||e.banner.description?(l(),g("div",de,[e.banner.heading_1?(l(),g("h1",ue,y(e.banner.heading_1),1)):v("",!0),e.banner.heading_2?(l(),g("h2",me,y(e.banner.heading_2),1)):v("",!0),e.banner.description?(l(),g("p",ge,y(e.banner.description),1)):v("",!0)])):v("",!0),e.banner.button_text?(l(),$(A(e.banner.button_type==="method"?"button":"router-link"),{key:1,to:e.banner.button_type==="url"?e.banner.button_value:void 0,onClick:e.handleButtonClick,class:"inline-block bg-[#657C6C] hover:bg-[#55695a] active:bg-[#48554a] text-white font-medium text-base sm:text-lg px-8 sm:px-10 md:px-12 py-3 sm:py-3.5 md:py-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] active:scale-100 shadow-lg"},{default:F(()=>[Q(y(e.banner.button_text),1)]),_:1},8,["to","onClick"])):v("",!0)])],4)],4)):v("",!0),T(s,{"is-open":e.showFeedbackModal,onClose:t[0]||(t[0]=r=>e.showFeedbackModal=!1),onSuccess:e.handleFeedbackSuccess},null,8,["is-open","onSuccess"])])}const he=q(re,[["render",fe]]),xe={name:"Decisions",components:{DecisionCard:ne,Transition:L,TransitionGroup:P},setup(){const n=b("Выберите решение под ваш участок"),t=b([]),a=b(!0),e=b(null),c=async()=>{try{const f=await fetch("/api/public/decision-block/settings");if(!f.ok)throw new Error("Ошибка загрузки настроек");const _=await f.json();_.data&&_.data.title&&(n.value=_.data.title)}catch(f){console.error("Ошибка загрузки настроек:",f)}},i=async()=>{a.value=!0,e.value=null;try{const f=await fetch("/api/public/decision-block/chapters");if(!f.ok)throw new Error("Ошибка загрузки данных");const O=(await f.json()).data||[];t.value=O.map((S,d)=>({id:S.id,name:S.name,active:d===0,items:[...(S.products||[]).map(x=>({...x,category:"products"})),...(S.services||[]).map(x=>({...x,category:"services"}))]})),t.value.length>0&&!t.value.find(S=>S.active)&&(t.value[0].active=!0)}catch(f){console.error("Ошибка загрузки разделов:",f),e.value="Не удалось загрузить данные. Попробуйте обновить страницу."}finally{a.value=!1}},s=E(()=>t.value.find(f=>f.active)||t.value[0]),r=E(()=>s.value?.items||[]),h=f=>{t.value.forEach(_=>{_.active=_.id===f.id})};return j(async()=>{await Promise.all([c(),i()])}),{title:n,chapters:t,activeChapter:s,activeItems:r,setActiveChapter:h,loading:a,error:e}}},pe={class:"w-full px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20"},be={class:"w-full max-w-[1200px] mx-auto"},_e={class:"flex justify-center mb-6 sm:mb-8"},ye={class:"text-2xl sm:text-3xl md:text-4xl font-semibold text-gray-900"},ve={key:0,class:"flex justify-center items-center py-12"},we={key:1,class:"flex justify-center items-center py-12"},ke={class:"text-red-500"},Se={key:0,class:"flex flex-col sm:flex-row gap-3 sm:gap-0 mb-6 sm:mb-8"},Ce=["onClick"];function Ee(n,t,a,e,c,i){const s=M("DecisionCard");return l(),g("div",pe,[o("div",be,[o("div",_e,[o("h2",ye,y(e.title),1)]),e.loading?(l(),g("div",ve,[...t[0]||(t[0]=[o("div",{class:"text-gray-500"},"Загрузка...",-1)])])):e.error?(l(),g("div",we,[o("div",ke,y(e.error),1)])):(l(),g(B,{key:2},[e.chapters.length>0?(l(),g("div",Se,[(l(!0),g(B,null,H(e.chapters,(r,h)=>(l(),g("button",{key:r.id,onClick:f=>e.setActiveChapter(r),class:I(["flex-1 px-4 sm:px-6 py-2.5 sm:py-3 text-sm sm:text-base font-normal text-center transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2","rounded-lg sm:rounded-none",r.active?"bg-[#657C6C] text-white border border-[#657C6C] hover:bg-[#55695a] focus:ring-[#657C6C] shadow-md":"bg-white text-black border border-[#657C6C] hover:bg-[#D7D7D7] focus:ring-[#657C6C] shadow-sm",h===0?r.active?"sm:rounded-l-lg sm:rounded-r-none":"sm:rounded-l-lg sm:rounded-r-none sm:border-r-0":"",h===e.chapters.length-1?r.active?"sm:rounded-r-lg sm:rounded-l-none":"sm:rounded-r-lg sm:rounded-l-none sm:border-l-0":""])},y(r.name),11,Ce))),128))])):v("",!0),T(L,{name:"fade-slide",mode:"out-in"},{default:F(()=>[e.activeItems.length>0?(l(),g("div",{key:`content-${e.activeChapter?.id}`,class:"relative"},[T(P,{name:"stagger",tag:"div",class:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6"},{default:F(()=>[(l(!0),g(B,null,H(e.activeItems,(r,h)=>(l(),$(s,{key:`${r.id}-${r.category}-${e.activeChapter?.id}`,decision:r,slug:r.category==="products"?"products":"services"},null,8,["decision","slug"]))),128))]),_:1})])):(l(),g("div",{key:`empty-${e.activeChapter?.id}`,class:"flex justify-center items-center py-12"},[...t[1]||(t[1]=[o("div",{class:"text-gray-500"},"В этом разделе пока нет элементов",-1)])]))]),_:1})],64))])])}const qe=q(xe,[["render",Ee],["__scopeId","data-v-18b0a824"]]),De={name:"ImagesCollect",props:{data:{type:Object,required:!0},numberQuestion:{type:Number,required:!0}},emits:["next","answer"],methods:{handleSelect(n){const t={id:n.id||n.name,name:n.name||"",title:n.title||n.name||"",text:n.title||n.name||"",src:n.src||n.webp||""};this.$emit("answer",t),n.child?setTimeout(()=>{this.$emit("next",n.child)},300):setTimeout(()=>{this.$emit("next")},300)},handleImageError(n){n.target.src="/upload/quiz/placeholder.jpg"}}},Be={class:"mt-6"},He={class:"flex items-center gap-3 sm:gap-4 mb-6 px-2"},Oe={class:"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-[#657C6C] text-white font-semibold text-lg sm:text-xl flex-shrink-0"},$e={class:"question text-lg sm:text-xl md:text-2xl font-medium text-gray-900"},je={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4"},Ue=["onClick"],ze={class:"relative aspect-[245/140] sm:aspect-[245/140] rounded-2xl overflow-hidden shadow-md hover:shadow-lg transition-all duration-300 transform hover:scale-105"},Me=["src","alt"],Te={class:"absolute top-3 left-3 right-3 z-10"},Fe={class:"text-white font-medium text-base sm:text-lg md:text-xl drop-shadow-lg"};function Ge(n,t,a,e,c,i){return l(),g("div",Be,[o("div",He,[o("div",Oe,y(a.data.id),1),o("div",$e,y(a.data.question),1)]),o("div",je,[(l(!0),g(B,null,H(a.data.selects,s=>(l(),g("div",{key:s.id,class:"relative group cursor-pointer",onClick:r=>i.handleSelect(s)},[o("div",ze,[o("img",{src:s.src||s.webp||"/upload/quiz/placeholder.jpg",alt:s.name||s.title,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",onError:t[0]||(t[0]=(...r)=>i.handleImageError&&i.handleImageError(...r))},null,40,Me),t[1]||(t[1]=o("div",{class:"absolute inset-0 bg-gradient-to-b from-black/60 via-black/20 to-transparent pointer-events-none"},null,-1)),o("div",Te,[o("h3",Fe,y(s.title),1)])])],8,Ue))),128))])])}const Ie=q(De,[["render",Ge]]),Ne={name:"Selects",props:{data:{type:Object,required:!0},numberQuestion:{type:Number,required:!0}},emits:["next","answer"],methods:{handleSelect(n){const t={id:n.id||n.name,name:n.name||"",title:n.title||n.name||"",text:n.name||n.title||""};this.$emit("answer",t),setTimeout(()=>{this.$emit("next")},300)}}},Ve={class:"mt-6"},Qe={class:"flex items-center gap-3 sm:gap-4 mb-6 px-2"},Ae={class:"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-[#657C6C] text-white font-semibold text-lg sm:text-xl flex-shrink-0"},Le={class:"question text-lg sm:text-xl md:text-2xl font-medium text-gray-900"},Pe={class:"space-y-3 sm:space-y-4 max-w-2xl"},We=["onClick"];function Ke(n,t,a,e,c,i){return l(),g("div",Ve,[o("div",Qe,[o("div",Ae,y(a.data.id),1),o("div",Le,y(a.data.question),1)]),o("div",Pe,[(l(!0),g(B,null,H(a.data.selects,s=>(l(),g("button",{key:s.id,onClick:r=>i.handleSelect(s),class:"w-full px-6 py-4 text-left bg-white border-2 border-gray-200 rounded-lg hover:border-[#657C6C] hover:bg-gray-50 transition-all duration-200 text-base sm:text-lg font-normal text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#657C6C] focus:ring-offset-2"},y(s.name),9,We))),128))])])}const Re=q(Ne,[["render",Ke]]),Je={name:"Inputs",props:{data:{type:Object,required:!0},numberQuestion:{type:Number,required:!0}},emits:["next","answer"],setup(n,{emit:t}){const a=b(n.data?.answer||""),e=E(()=>{const i=a.value;return i==null?!1:i.toString().trim()!==""});return{answerValue:a,isAnswerValid:e,handleNext:()=>{const i=a.value?.toString().trim()||"";i&&(n.data&&(n.data.answer=i),t("answer",i),n.data?.child?t("next",n.data.child):t("next"))}}}},Xe={class:"mt-6"},Ye={class:"flex items-center gap-3 sm:gap-4 mb-6 px-2"},Ze={class:"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-[#657C6C] text-white font-semibold text-lg sm:text-xl flex-shrink-0"},et={class:"question text-lg sm:text-xl md:text-2xl font-medium text-gray-900"},tt={class:"max-w-2xl"},st={class:"block text-sm font-medium text-gray-700 mb-2"},ot={class:"flex flex-col sm:flex-row gap-3 sm:gap-4"},nt=["placeholder"],at=["disabled"];function it(n,t,a,e,c,i){return l(),g("div",Xe,[o("div",Ye,[o("div",Ze,y(a.data.id),1),o("div",et,y(a.data.question),1)]),o("div",tt,[o("label",st,y(a.data.label),1),o("div",ot,[z(o("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>e.answerValue=s),type:"text",placeholder:a.data.placeholder,onKeyup:t[1]||(t[1]=K((...s)=>e.handleNext&&e.handleNext(...s),["enter"])),class:"flex-1 w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm sm:text-base transition-colors disabled:opacity-50 focus:border-[#657C6C] focus:ring-2 focus:ring-[#657C6C]/20 focus:outline-none"},null,40,nt),[[N,e.answerValue]]),o("button",{onClick:t[2]||(t[2]=(...s)=>e.handleNext&&e.handleNext(...s)),disabled:!e.isAnswerValid,class:"px-6 sm:px-8 py-3 bg-[#657C6C] hover:bg-[#55695a] disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-[#657C6C] focus:ring-offset-2"}," Далее ",8,at)])])])}const rt=q(Je,[["render",it]]),lt={name:"Forms",props:{data:{type:Object,required:!0},numberQuestion:{type:Number,required:!0}},emits:["next","answer"],computed:{isFormValid(){return this.data.form.name&&this.data.form.name.trim()!==""&&this.data.form.email&&this.data.form.email.trim()!==""&&this.data.form.phone&&this.data.form.phone.trim()!==""&&this.data.form.check}},methods:{async handleSubmit(){this.isFormValid&&(this.$emit("answer",this.data.form),this.$emit("submit",{name:this.data.form.name,email:this.data.form.email,phone:this.data.form.phone}))}}},ct={class:"mt-6"},dt={class:"mb-6 px-2"},ut=["innerHTML"],mt={class:"max-w-2xl"},gt={class:"flex items-start"},ft=["disabled"];function ht(n,t,a,e,c,i){return l(),g("div",ct,[o("div",dt,[o("div",{class:"question text-lg sm:text-xl md:text-2xl font-medium text-gray-900",innerHTML:a.data.question},null,8,ut)]),o("div",mt,[o("form",{onSubmit:t[4]||(t[4]=R((...s)=>i.handleSubmit&&i.handleSubmit(...s),["prevent"])),class:"space-y-4"},[o("div",null,[t[5]||(t[5]=o("label",{for:"quiz-name",class:"block text-sm font-medium text-gray-700 mb-2"}," Ваше имя ",-1)),z(o("input",{id:"quiz-name","onUpdate:modelValue":t[0]||(t[0]=s=>a.data.form.name=s),type:"text",required:"",class:"w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm sm:text-base transition-colors focus:border-[#657C6C] focus:ring-2 focus:ring-[#657C6C]/20 focus:outline-none",placeholder:"Иван Иванов"},null,512),[[N,a.data.form.name]])]),o("div",null,[t[6]||(t[6]=o("label",{for:"quiz-email",class:"block text-sm font-medium text-gray-700 mb-2"}," Ваш email ",-1)),z(o("input",{id:"quiz-email","onUpdate:modelValue":t[1]||(t[1]=s=>a.data.form.email=s),type:"email",required:"",class:"w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm sm:text-base transition-colors focus:border-[#657C6C] focus:ring-2 focus:ring-[#657C6C]/20 focus:outline-none",placeholder:"your@email.com"},null,512),[[N,a.data.form.email]])]),o("div",null,[t[7]||(t[7]=o("label",{for:"quiz-phone",class:"block text-sm font-medium text-gray-700 mb-2"}," Ваш телефон ",-1)),z(o("input",{id:"quiz-phone","onUpdate:modelValue":t[2]||(t[2]=s=>a.data.form.phone=s),type:"tel",required:"",class:"w-full rounded-md border border-gray-300 bg-white px-4 py-3 text-sm sm:text-base transition-colors focus:border-[#657C6C] focus:ring-2 focus:ring-[#657C6C]/20 focus:outline-none",placeholder:"+7 (999) 123-45-67"},null,512),[[N,a.data.form.phone]])]),o("div",gt,[z(o("input",{id:"quiz-check","onUpdate:modelValue":t[3]||(t[3]=s=>a.data.form.check=s),type:"checkbox",required:"",class:"mt-1 h-4 w-4 rounded border-gray-300 text-[#657C6C] focus:ring-[#657C6C] focus:ring-2"},null,512),[[J,a.data.form.check]]),t[8]||(t[8]=o("label",{for:"quiz-check",class:"ml-3 text-sm text-gray-600"}," Отправляя данную форму, вы соглашаетесь на обработку персональных данных ",-1))]),o("button",{type:"submit",disabled:!i.isFormValid,class:"w-full sm:w-auto px-8 py-3 bg-[#657C6C] hover:bg-[#55695a] disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-[#657C6C] focus:ring-offset-2"}," Отправить ",8,ft)],32)])])}const xt=q(lt,[["render",ht]]),pt={name:"Thank",props:{data:{type:Object,default:()=>({})},numberQuestion:{type:Number,required:!0}}},bt={class:"mt-6"};function _t(n,t,a,e,c,i){return l(),g("div",bt,[...t[0]||(t[0]=[X('<div class="flex flex-col items-center justify-center py-8 sm:py-12 px-4"><div class="w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-green-100 flex items-center justify-center mb-6"><svg class="w-8 h-8 sm:w-10 sm:h-10 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div><h3 class="text-xl sm:text-2xl md:text-3xl font-semibold text-gray-900 text-center mb-4"> Спасибо! </h3><p class="text-base sm:text-lg text-gray-600 text-center max-w-md"> Наши специалисты свяжутся с вами в течение 15 минут </p></div>',1)])])}const yt=q(pt,[["render",_t]]),vt={name:"Quiz",components:{"images-collect":Ie,selects:Re,inputs:rt,forms:xt,thank:yt},props:{title:{type:String,default:"Подберите идеальное решение"},description:{type:String,default:"Ответьте на несколько вопросов, и мы предложим оптимальный вариант"}},setup(){const n=b(!0),t=b(null),a=b(null),e=b([]),c=b(1),i=b([]),s=b(!1),r=b({}),h=b(!1),f=b(!1),_=async()=>{try{const u=await fetch("/api/public/quiz-block/settings");if(!u.ok)throw new Error("Ошибка загрузки настроек");const m=await u.json();m.data?(s.value=m.data.is_active===!0,m.data.quiz_id?await O(m.data.quiz_id):n.value=!1):n.value=!1}catch(u){console.error("Ошибка загрузки настроек блока квиза:",u),n.value=!1}},O=async u=>{n.value=!0,t.value=null;try{const m=await fetch(`/api/public/quiz-block/quiz/${u}`);if(!m.ok)throw new Error("Ошибка загрузки квиза");const p=await m.json();p.data&&(a.value={id:p.data.id,title:p.data.title,description:p.data.description},e.value=(p.data.questions||[]).filter(w=>w.is_active!==!1).sort((w,k)=>(w.order||0)-(k.order||0)).map((w,k)=>({...w,displayId:k+1})),e.value.length>0&&(c.value=e.value[0].displayId,i.value=[]))}catch(m){t.value=m.message||"Ошибка загрузки квиза",console.error("Ошибка загрузки квиза:",m)}finally{n.value=!1}},S=u=>{const m={id:u.displayId||u.id||u.order,question:u.question_text||"",type:u.question_type,...u.question_data||{}};return(u.question_type==="images-collect"||u.question_type==="selects")&&u.question_data?.selects&&(m.selects=u.question_data.selects.map((p,w)=>({id:p.id||w+1,name:p.name||"",src:p.src||"",title:p.title||p.name||"",child:p.child||null}))),u.question_type==="inputs"&&u.question_data&&(m.label=u.question_data.label||"",m.placeholder=u.question_data.placeholder||"",m.child=u.question_data.child||null,m.answer=""),u.question_type==="forms"&&u.question_data&&(m.form=u.question_data.form||{name:"",email:"",phone:"",check:!1},m.child=u.question_data.child||null,m.question=u.question_text||u.question_data.question||""),m},d=E(()=>e.value.find(u=>u.displayId===c.value)),x=u=>{const m=c.value;if(m&&!i.value.includes(m)&&i.value.push(m),u){const p=e.value.findIndex(w=>w.displayId===c.value);u>0&&u<=e.value.length?c.value=u:p<e.value.length-1&&(c.value=e.value[p+1].displayId)}else{const p=e.value.findIndex(w=>w.displayId===c.value);p<e.value.length-1&&(c.value=e.value[p+1].displayId)}},D=()=>{const u=e.value.findIndex(m=>m.displayId===c.value);if(u>0){const m=e.value[u-1];if(m){const p=i.value.lastIndexOf(c.value);p!==-1&&(i.value=i.value.slice(0,p)),c.value=m.displayId}}},G=u=>{const m=e.value.find(p=>p.displayId===c.value);m&&(r.value[m.id]={question_id:m.id,question_text:m.question_text,question_type:m.question_type,answer:u})},U=async u=>{if(!(f.value||h.value)){f.value=!0;try{const m=e.value.filter(C=>r.value[C.id]).map(C=>r.value[C.id].answer),p=await fetch("/api/public/quiz/submit",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({quiz_id:a.value.id,answers:m,contact:u})});let w="",k=null;try{if(w=await p.text(),w)try{k=JSON.parse(w)}catch(C){throw console.error("Ошибка парсинга JSON:",C,"Response text:",w.substring(0,200)),new Error("Сервер вернул некорректный ответ. Пожалуйста, попробуйте еще раз.")}}catch(C){throw console.error("Ошибка чтения ответа:",C),new Error("Ошибка получения ответа от сервера")}if(!p.ok){const C=k&&k.message||k&&k.error||`Ошибка сервера: ${p.status} ${p.statusText}`;throw new Error(C)}if(!k)throw console.error("Сервер вернул пустой ответ. Response text:",w.substring(0,200)),new Error("Сервер вернул пустой ответ");if(typeof k!="object")throw console.error("Сервер вернул некорректный тип данных:",typeof k,k),new Error("Сервер вернул некорректный ответ");if(k.success===!0)return h.value=!0,{success:!0,message:k.message||"Спасибо за прохождение квиза!"};{const C=k.message||k.error||"Ошибка отправки результатов квиза";throw new Error(C)}}catch(m){return console.error("Ошибка отправки результатов квиза:",m),{success:!1,message:m.message||"Ошибка отправки результатов квиза. Пожалуйста, попробуйте еще раз."}}finally{f.value=!1}}},W=async u=>{const m=await U(u);m.success?x():alert(m.message||"Произошла ошибка при отправке результатов. Пожалуйста, попробуйте еще раз.")};return j(()=>{_()}),{loading:n,error:t,quizData:a,questions:e,currentQuestionNumber:c,currentQuestion:d,isActive:s,isCompleted:h,isSubmitting:f,formatQuestionData:S,goToNext:x,goToPrevious:D,handleAnswer:G,handleSubmit:W,submitQuiz:U,questionHistory:i}}},wt={key:0,class:"w-full px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20"},kt={class:"w-full max-w-[1200px] mx-auto"},St={class:"flex flex-col items-center mb-6 sm:mb-8"},Ct={class:"text-2xl sm:text-3xl md:text-4xl font-semibold text-gray-900 text-center mb-3"},Et={key:0,class:"text-gray-600 text-center text-base sm:text-lg"},qt={key:0,class:"flex justify-center items-center py-12"},Dt={key:1,class:"flex justify-center items-center py-12"},Bt={class:"text-red-500"},Ht={key:0,class:"mb-4"};function Ot(n,t,a,e,c,i){return e.isActive?(l(),g("div",wt,[o("div",kt,[o("div",St,[o("h2",Ct,y(e.quizData?.title||a.title),1),e.quizData?.description||a.description?(l(),g("p",Et,y(e.quizData?.description||a.description),1)):v("",!0)]),e.loading?(l(),g("div",qt,[...t[1]||(t[1]=[o("div",{class:"text-gray-500"},"Загрузка квиза...",-1)])])):e.error?(l(),g("div",Dt,[o("div",Bt,y(e.error),1)])):e.currentQuestion?(l(),$(L,{key:2,name:"quiz-fade",mode:"out-in"},{default:F(()=>[o("div",null,[e.questionHistory.length>0||e.currentQuestionNumber>1?(l(),g("div",Ht,[o("button",{onClick:t[0]||(t[0]=(...s)=>e.goToPrevious&&e.goToPrevious(...s)),class:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors text-sm sm:text-base"},[...t[2]||(t[2]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),Q(" Назад ",-1)])])])):v("",!0),(l(),$(A(e.currentQuestion.question_type),{key:e.currentQuestion.id,data:e.formatQuestionData(e.currentQuestion),"number-question":e.currentQuestion.id,onNext:e.goToNext,onAnswer:e.handleAnswer,onSubmit:e.handleSubmit},null,40,["data","number-question","onNext","onAnswer","onSubmit"]))])]),_:1})):v("",!0)])])):v("",!0)}const $t=q(vt,[["render",Ot],["__scopeId","data-v-1bcb4acb"]]),jt={name:"WhyChooseUs",setup(){const n=b(null),t=b(!0),a=async()=>{try{const s=await fetch("/api/public/why-choose-us-block/settings");if(s.ok){const r=await s.json();r.data&&(n.value=r.data)}}catch(s){console.error("Error fetching WhyChooseUs block settings:",s)}finally{t.value=!1}},e=(s,r)=>{const h=[3,6,3,6,6,12],f=s.col||h[r]||3;return{3:"w-full md:w-1/4",6:"w-full md:w-1/2",12:"w-full"}[f]||"w-full md:w-1/4"},c=(s,r)=>{const h=["card-blue","card-blue","card-blue","card-blue","card-blue","card-green"];return(s.bg||h[r]||"card-blue")==="card-green"?"bg-[#688E67]":"bg-[#F4F6FC]"},i=(s,r)=>{const h=["card-blue","card-blue","card-blue","card-blue","card-blue","card-green"];return(s.bg||h[r]||"card-blue")==="card-green"?"text-white":"text-black"};return j(()=>{a()}),{settings:n,loading:t,getCardColumnClass:e,getCardBgClass:c,getCardTextClass:i}}},Ut={key:0,class:"w-full px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20 bg-background"},zt={class:"w-full max-w-[1200px] mx-auto"},Mt={key:0,class:"flex justify-center mb-6 md:mb-8"},Tt={class:"text-2xl sm:text-3xl md:text-4xl font-semibold text-foreground text-center"},Ft={key:1,class:"flex flex-wrap -mx-3"},Gt={key:0,class:"absolute bottom-[5px] right-[5px]"},It=["src","alt"],Nt=["innerHTML"];function Vt(n,t,a,e,c,i){return e.settings&&e.settings.is_active?(l(),g("section",Ut,[o("div",zt,[e.settings.title?(l(),g("div",Mt,[o("h2",Tt,y(e.settings.title),1)])):v("",!0),e.settings.items&&e.settings.items.length>0?(l(),g("div",Ft,[(l(!0),g(B,null,H(e.settings.items,(s,r)=>(l(),g("div",{key:r,class:I([e.getCardColumnClass(s,r),"px-3 mb-3"])},[o("div",{class:I(["relative rounded-2xl h-[140px] overflow-hidden",e.getCardBgClass(s,r)])},[s.icon&&(s.icon.url||s.icon.disk&&s.icon.name)?(l(),g("div",Gt,[o("img",{src:s.icon.url||`/${s.icon.disk}/${s.icon.name}`,alt:s.text,class:"h-auto max-h-[120px] object-contain",loading:"lazy"},null,8,It)])):v("",!0),s.text?(l(),g("div",{key:1,class:I(["card-title absolute left-5 top-5 text-base sm:text-lg font-medium leading-[22px]",e.getCardTextClass(s,r)]),innerHTML:s.text},null,10,Nt)):v("",!0)],2)],2))),128))])):v("",!0)])])):v("",!0)}const Qt=q(jt,[["render",Vt],["__scopeId","data-v-90ed1ee0"]]),At={name:"CasesBlock",components:{CaseCard:ae},setup(){const n=b(null),t=b([]),a=b(!0),e=async()=>{try{const i=await fetch("/api/public/cases-block/settings");if(i.ok){const s=await i.json();s.data&&(n.value=s.data,n.value.case_ids&&n.value.case_ids.length>0&&await c(n.value.case_ids))}}catch(i){console.error("Error fetching Cases block settings:",i)}finally{a.value=!1}},c=async i=>{try{const s=i.join(","),r=await fetch(`/api/public/cases?ids=${s}&with=image,images`);if(r.ok){const h=await r.json();if(h.data){const f=new Map(h.data.map(_=>[_.id,_]));t.value=i.map(_=>f.get(_)).filter(_=>_!==void 0)}}}catch(s){console.error("Error fetching cases:",s)}};return j(()=>{e()}),{settings:n,cases:t,loading:a}}},Lt={key:0,class:"w-full px-3 sm:px-4 md:px-5 py-8 sm:py-12 md:py-16 lg:py-20 bg-background"},Pt={class:"w-full max-w-[1200px] mx-auto"},Wt={key:0,class:"flex justify-center mb-6 md:mb-8"},Kt={class:"text-2xl sm:text-3xl md:text-4xl font-semibold text-foreground text-center"},Rt={class:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8"},Jt={class:"flex justify-center mt-8 md:mt-12"};function Xt(n,t,a,e,c,i){const s=M("CaseCard"),r=M("router-link");return e.settings&&e.settings.is_active&&e.cases.length>0?(l(),g("section",Lt,[o("div",Pt,[e.settings.title?(l(),g("div",Wt,[o("h2",Kt,y(e.settings.title),1)])):v("",!0),o("div",Rt,[(l(!0),g(B,null,H(e.cases,h=>(l(),$(s,{key:h.id,"case-item":h},null,8,["case-item"]))),128))]),o("div",Jt,[T(r,{to:"/cases",class:"inline-flex items-center justify-center px-6 md:px-8 py-3 md:py-4 bg-[#688E67] text-white rounded-lg hover:bg-[#5a7a5a] transition-colors font-medium text-base md:text-lg"},{default:F(()=>[...t[0]||(t[0]=[Q(" Смотреть все кейсы ",-1)])]),_:1})])])])):v("",!0)}const Yt=q(At,[["render",Xt]]),Zt={HeroBanner:he,HowWork:oe,Decisions:qe,Quiz:$t,Faq:se,WhyChooseUs:Qt,CasesBlock:Yt,FeedbackForm:ie},es={name:"Home",components:{SEOHead:Z},setup(){console.log("[SEO DEBUG] Home.setup: начало setup"),console.log("[SEO DEBUG] Home.setup: текущий title при setup:",document.title);const{hidePreloader:n}=ee(),t=b([]),a=b(!0),e={site_name:"Lagom - Профессиональные услуги по работе с земельными участками",site_description:"Профессиональные услуги по подбору и оформлению земельных участков. Кадастровые работы, консультации, оформление документов.",site_keywords:"земельные участки, кадастр, оформление документов, недвижимость, Lagom",default_og_image:"",og_type:"website"},c=b(e);console.log("[SEO DEBUG] Home.setup: seoSettings инициализирован:",c.value),console.log("[SEO DEBUG] Home.setup: title после инициализации:",document.title);const i=E(()=>t.value.map(d=>{const x=Zt[d.component];if(!x)return console.warn(`Component ${d.component} not found`),null;const D=d.settings||{};return{key:d.key,component:x,props:D}}).filter(d=>d!==null)),s=async()=>{try{const d=await fetch("/api/public/home-page-blocks");if(d.ok){const x=await d.json();x.data&&(t.value=x.data)}}catch(d){console.error("Error fetching home page blocks:",d),t.value=[{key:"hero_banner",component:"HeroBanner",settings:{}},{key:"decisions",component:"Decisions",settings:{}},{key:"quiz",component:"Quiz",settings:{}},{key:"how_work",component:"HowWork",settings:{}},{key:"faq",component:"Faq",settings:{}},{key:"why_choose_us",component:"WhyChooseUs",settings:{}},{key:"cases_block",component:"CasesBlock",settings:{}},{key:"feedback_form",component:"FeedbackForm",settings:{title:"Остались вопросы?",description:"Напишите нам, и мы с удовольствием ответим на все ваши вопросы"}}]}finally{a.value=!1,n()}},r=E(()=>window.location.origin+"/"),h=E(()=>{const d=[],x=c.value.website_schema||{"@context":"https://schema.org","@type":"WebSite",name:c.value.site_name||"Lagom",description:c.value.site_description||"Профессиональные услуги по подбору и оформлению земельных участков",url:window.location.origin};d.push(x);const D=c.value.organization_schema||{"@context":"https://schema.org","@type":"Organization",name:c.value.site_name||"Lagom",url:window.location.origin};return d.push(D),d}),f=async()=>{console.log("[SEO DEBUG] Home.fetchSeoSettings: начало загрузки SEO настроек"),console.log("[SEO DEBUG] Home.fetchSeoSettings: текущий title до запроса:",document.title),console.log("[SEO DEBUG] Home.fetchSeoSettings: текущие seoSettings:",c.value);try{const d=await fetch("/api/public/seo-settings");if(console.log("[SEO DEBUG] Home.fetchSeoSettings: ответ получен, status:",d.status),d.ok){const x=await d.json();if(console.log("[SEO DEBUG] Home.fetchSeoSettings: данные получены:",x.data),x.data){const D=x.data.site_name&&x.data.site_name.trim()!==""&&x.data.site_name!=="Laravel"&&x.data.site_name.toLowerCase()!=="laravel",G=x.data.site_description&&x.data.site_description.trim()!=="";console.log("[SEO DEBUG] Home.fetchSeoSettings: isValidSiteName:",D,"site_name:",x.data.site_name),console.log("[SEO DEBUG] Home.fetchSeoSettings: isValidDescription:",G);const U={...e,...x.data,site_name:D?x.data.site_name:e.site_name,site_description:G?x.data.site_description:e.site_description,site_keywords:x.data.site_keywords&&x.data.site_keywords.trim()!==""?x.data.site_keywords:e.site_keywords};console.log("[SEO DEBUG] Home.fetchSeoSettings: новые seoSettings:",U),console.log("[SEO DEBUG] Home.fetchSeoSettings: title до обновления seoSettings:",document.title),c.value=U,console.log("[SEO DEBUG] Home.fetchSeoSettings: seoSettings обновлен"),console.log("[SEO DEBUG] Home.fetchSeoSettings: title после обновления seoSettings:",document.title)}}}catch(d){console.error("[SEO DEBUG] Home.fetchSeoSettings: ошибка загрузки:",d)}};j(()=>{console.log("[SEO DEBUG] Home.onMounted: компонент смонтирован"),console.log("[SEO DEBUG] Home.onMounted: текущий title:",document.title),console.log("[SEO DEBUG] Home.onMounted: текущие seoSettings:",c.value),f(),s(),console.log("[SEO DEBUG] Home.onMounted: запросы отправлены")});const _=E(()=>{const d=c.value.site_name;return console.log("[SEO DEBUG] Home.seoTitle computed: исходное значение:",d),!d||d.trim()===""||d==="Laravel"||d.toLowerCase()==="laravel"?(console.log("[SEO DEBUG] Home.seoTitle computed: используем дефолтное значение:",e.site_name),e.site_name):(console.log("[SEO DEBUG] Home.seoTitle computed: используем значение из seoSettings:",d),d)}),O=E(()=>{const d=c.value.site_description;return console.log("[SEO DEBUG] Home.seoDescription computed: исходное значение:",d),!d||d.trim()===""?(console.log("[SEO DEBUG] Home.seoDescription computed: используем дефолтное значение:",e.site_description),e.site_description):(console.log("[SEO DEBUG] Home.seoDescription computed: используем значение из seoSettings:",d),d)}),S=E(()=>{const d=c.value.site_keywords;return console.log("[SEO DEBUG] Home.seoKeywords computed: исходное значение:",d),!d||d.trim()===""?(console.log("[SEO DEBUG] Home.seoKeywords computed: используем дефолтное значение:",e.site_keywords),e.site_keywords):(console.log("[SEO DEBUG] Home.seoKeywords computed: используем значение из seoSettings:",d),d)});return{blocks:t,loading:a,orderedBlocks:i,seoSettings:c,seoTitle:_,seoDescription:O,seoKeywords:S,canonicalUrl:r,combinedSchema:h}}},ts={class:"home-page"};function ss(n,t,a,e,c,i){const s=M("SEOHead");return l(),g("div",ts,[T(s,{title:e.seoTitle,description:e.seoDescription,keywords:e.seoKeywords,"og-image":e.seoSettings.default_og_image,"og-type":e.seoSettings.og_type||"website",canonical:e.canonicalUrl,schema:e.combinedSchema},null,8,["title","description","keywords","og-image","og-type","canonical","schema"]),(l(!0),g(B,null,H(e.orderedBlocks,(r,h)=>(l(),$(A(r.component),Y({key:r.key},{ref_for:!0},r.props),null,16))),128))])}const us=q(es,[["render",ss]]);export{us as default};
